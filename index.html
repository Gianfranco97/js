<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Notes</title>
</head>
<body>
    <header></header>
    <section class="add-note">
        <form id="form-add">
            <input type="text" name="noteTitle" id="noteTitle">
            <input type="text" name="noteDescription" id="noteDescription">
            <input type="button" onclick="addNote()" value="Add">
        </form>
    </section>
    <section class="notes" id="notes">
    </section>
</body>
<script>
let notes = [];
function addNote() {    
    let noteTitle = document.getElementById('noteTitle').value;
    let noteDescription = document.getElementById('noteDescription').value;

    notes.push({
        title: noteTitle,
        description: noteDescription
    })
    document.getElementById('form-add').reset();
    displayNotes();

}

function displayNotes() {

        let i = notes.length - 1;

        let noteContainer = document.createElement("article");
        noteContainer.setAttribute("class", "note");
        noteContainer.setAttribute("id", i)
        document.getElementById('notes').appendChild(noteContainer);

        let titleTag = document.createElement("h2");
        let titleContent = document.createTextNode(notes[i].title);
        let titleNote = titleTag.appendChild(titleContent);
        
        let descriptionTag = document.createElement("p");
        let descriptionContent = document.createTextNode(notes[i].description);
        let descriptionNote = descriptionTag.appendChild(descriptionContent);

        let buttonTag = document.createElement("button");
        buttonTag.setAttribute("class", "removeNote");
        buttonTag.setAttribute("id", "button-" + i);
        buttonTag.setAttribute("onclick", "removeNote(this.id)");
        
    
        document.getElementById(i).appendChild(titleTag);
        document.getElementById(i).appendChild(descriptionTag);
        document.getElementById(i).appendChild(buttonTag);
}

function removeNote(id) {
    let parentId = document.getElementById(id).parentElement.id;
    
    document.getElementById(parentId).remove();

    notes.splice(parentId, 1);
    updateNoteId();
}

function updateNoteId() {
    let test = document.getElementsByClassName("note");
    for(i=0; i < test.length; i++) {
        test[i].id = i;
    }

}


</script>
</html>